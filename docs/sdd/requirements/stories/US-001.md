# US-001: プッシュトークによる音声入力

## ユーザーストーリー

**私は** macOSユーザーとして
**〜したい** 任意のアプリ上でホットキーを押している間に話した内容をテキストとして入力したい
**なぜなら** キーボード入力よりも素早くテキストを入力でき、作業効率が向上するから

## 受入基準（EARS記法）

### 機能要件

- **REQ-001**: ユーザーがプッシュトークキー（初期値: 右Optionキー）を押下した時、システムはマイクからの音声録音を開始しなければならない
- **REQ-002**: ユーザーがプッシュトークキーを離した時、システムは録音を停止し、音声認識処理を開始しなければならない
- **REQ-003**: 音声録音中、システムはメニューバーアイコンを録音中状態に変更し、ユーザーに視覚的フィードバックを提供しなければならない
- **REQ-004**: 音声認識処理中、システムはメニューバーアイコンを処理中状態に変更しなければならない
- **REQ-005**: 音声認識が完了した時、システムは認識結果テキストをクリップボードにコピーし、アクティブなアプリケーションに対してCmd+Vキーストロークを送信してテキストを挿入しなければならない
- **REQ-006**: テキスト挿入の前に、システムは既存のクリップボード内容を退避し、挿入完了後に復元しなければならない

## 画面/UI要件

- メニューバーアイコンは3状態（待機中・録音中・処理中）を視覚的に区別できるアイコンで表示する

## データ要件

- 音声録音フォーマット: 16kHz、モノラル、16bit PCM
- 録音データはメモリ上のみで保持し、認識完了後に破棄する

## 関連ストーリー

- [US-002](US-002.md) @US-002.md: テキスト後処理（句読点挿入・整形）
- [US-003](US-003.md) @US-003.md: メニューバー常駐と設定
- [US-006](US-006.md) @US-006.md: macOS権限の管理

## 備考

- プッシュトークキーのグローバル監視にはアクセシビリティ権限が必要
- テキスト挿入にはpyobjc（NSPasteboard + CGEvent）を使用
