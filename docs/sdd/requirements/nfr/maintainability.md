# 保守性要件

> 非機能要件カテゴリ: 保守性

## 概要

SpeakDropのコードベースは長期的な保守性を確保するため、静的解析ツールとテストカバレッジ基準を設ける。型安全なPythonコードと高いテストカバレッジにより、機能追加・変更時のリグレッションリスクを低減する。

## 要件一覧

### NFR-009: コード品質基準

**EARS記法**: システムのコードはruffによるリント・フォーマット、mypyによる型チェックをすべてパスしなければならない

**測定基準**:
- 指標: ruffおよびmypyの検査結果
- 目標値: エラー・警告ゼロ（ruff check / ruff format --check / mypy）
- 測定方法: CI/CDパイプラインでの自動チェック

**対象ツール**:
- ruff: リント・フォーマットチェック
- mypy: 静的型チェック（strict モード推奨）

**関連する機能要件**: 全REQ

**優先度**: 高

**検証方法**:
- [ ] `uv run ruff check .` がエラーゼロで完了することを確認
- [ ] `uv run ruff format --check .` がエラーゼロで完了することを確認
- [ ] `uv run mypy .` がエラーゼロで完了することを確認
- [ ] 上記をCIで自動実行する設定を追加

---

### NFR-010: テストカバレッジ

**EARS記法**: システムの主要モジュールはテストカバレッジ80%以上を維持しなければならない

**測定基準**:
- 指標: pytest-covによるカバレッジ計測値
- 目標値: 主要モジュール合計で80%以上
- 測定方法: `uv run pytest --cov` による計測

**対象モジュール（主要）**:
- 音声録音モジュール
- 音声認識モジュール
- テキスト後処理モジュール
- 設定管理モジュール
- クリップボード操作モジュール

**関連する機能要件**: 全REQ

**優先度**: 中

**検証方法**:
- [ ] `uv run pytest --cov --cov-report=term-missing` で80%以上であることを確認
- [ ] カバレッジレポートをCIの成果物として保存する設定を追加
- [ ] カバレッジが80%を下回るPRをCIでブロックする設定を追加
