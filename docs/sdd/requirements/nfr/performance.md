# 性能要件

> 非機能要件カテゴリ: 性能

## 概要

SpeakDropの性能要件は、音声入力からテキスト挿入までのレイテンシを最小化し、ユーザーの作業フローを妨げないことを目標とする。Apple Silicon Mac上での高速な音声認識と、低メモリフットプリントでの常駐動作を実現する。

## 要件一覧

### NFR-001: 音声認識処理時間

**EARS記法**: 10秒の音声入力に対して、システムは5秒以内に音声認識処理を完了しなければならない

**測定基準**:
- 指標: 音声入力終了からクリップボードへのテキスト書き込み完了までの経過時間
- 目標値: 5秒以内
- 測定方法: 10秒の日本語音声サンプルを使用した自動テスト

**対象環境**: large-v3-jaモデル使用、Apple Silicon Mac基準

**関連する機能要件**: REQ-002, REQ-005

**優先度**: 高

**検証方法**:
- [ ] 10秒の日本語音声サンプルで処理時間を計測
- [ ] Apple Silicon Mac（M1以上）で5秒以内であることを確認

---

### NFR-002: テキスト後処理時間

**EARS記法**: 認識テキスト200文字に対して、システムはOllama LLMによるテキスト後処理を3秒以内に完了しなければならない

**測定基準**:
- 指標: 後処理開始から整形テキスト取得完了までの経過時間
- 目標値: 3秒以内
- 測定方法: 200文字の日本語テキストサンプルを使用した自動テスト

**対象環境**: qwen2.5:7bモデル、Ollama稼働中

**関連する機能要件**: REQ-007, REQ-008

**優先度**: 高

**検証方法**:
- [ ] 200文字の日本語テキストサンプルで処理時間を計測
- [ ] qwen2.5:7bモデルで3秒以内であることを確認

---

### NFR-003: 待機時メモリ使用量

**EARS記法**: 待機状態の間、システムはメモリ使用量を500MB以下に維持しなければならない

**測定基準**:
- 指標: RSS（Resident Set Size）メモリ使用量
- 目標値: 500MB以下（モデルロード済み時はモデルサイズ分を別途許容）
- 測定方法: アクティビティモニタまたはpsutilでの計測

**関連する機能要件**: REQ-001

**優先度**: 中

**検証方法**:
- [ ] 待機状態で5分間モニタリングし、500MB以下であることを確認
- [ ] モデル別（small/medium/large-v3/large-v3-ja）に計測値を記録

---

### NFR-004: 音声録音フォーマット

**EARS記法**: システムは音声録音のサンプリングレートを16kHz、チャンネルをモノラル、ビット深度を16bit PCMに設定しなければならない

**測定基準**:
- 指標: 録音データのフォーマットパラメータ
- 目標値: 16000Hz / Mono / 16bit PCM（faster-whisperの入力要件に準拠）
- 測定方法: 録音データのメタデータ検査

**関連する機能要件**: REQ-001, REQ-002

**優先度**: 高

**検証方法**:
- [ ] 録音データのサンプリングレートが16000Hzであることを自動テストで確認
- [ ] チャンネル数が1（モノラル）であることを確認
- [ ] ビット深度が16bitであることを確認
